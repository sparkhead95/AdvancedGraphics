<html>

<head>
<meta charset="utf-8"/>
<title>Advanced Graphics Assignment</title>
<style>
body {margin: 0;}
canvas {width: 100%; height 100%;}
</style>
</head>

<body>
<script src = "https://threejs.org/build/three.js" ></script>
<script src="http://cdn.rawgit.com/mrdoob/three.js/master/examples/js/controls/TrackballControls.js"></script>
<script>
//Custom javascript

//Define the windows width and height first
var width = window.innerWidth;
var height = window.innerHeight;

//Define renderer and the scene
var renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(width, height);
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;

document.body.appendChild(renderer.domElement);
var scene = new THREE.Scene();

var axis = new THREE.AxisHelper(10);
scene.add(axis);

// Floor
var cube = new THREE.PlaneGeometry(200,100,5,8);
var cubeMat = new THREE.MeshPhongMaterial({color:0x88898, side: THREE.DoubleSide});
var floor = new THREE.Mesh(cube, cubeMat);
floor.receiveShadow = true;
scene.add(floor);


// Roof
var roof = new THREE.Mesh(cube, cubeMat);
roof.position.set(0,0,100);
roof.receiveShadow = true;
roof.castShadow = true;
scene.add(roof);

// Back wall
var bWall = new THREE.Mesh(cube, cubeMat);
bWall.position.set(0,50,50);
bWall.rotation.x =  Math.PI * 90 / 180;
bWall.receiveShadow = true;
scene.add(bWall);


// Left wall
var lWall = new THREE.Mesh(cube, cubeMat);
lWall.position.set(-100,0,50);
lWall.receiveShadow = true;
lWall.rotation.y =  Math.PI * 90 / 180;
lWall.rotation.x =  Math.PI * 90 / 180;
scene.add(lWall);

// Right wall
var rWall = new THREE.Mesh(cube, cubeMat);
rWall.position.set(100,0,50);
rWall.receiveShadow = true;
rWall.rotation.y =  Math.PI * 90 / 180;
rWall.rotation.x =  Math.PI * 90 / 180;
scene.add(rWall);

// Front wall
var fWall = new THREE.Mesh(cube, cubeMat);
fWall.position.set(0,-50,50);
fWall.rotation.x =  Math.PI * 90 / 180;
fWall.receiveShadow = true;
scene.add(fWall);




// Define the Ball
var geometry = new THREE.BoxGeometry(20, 20, 20, 0, 0, 50);
var material = new THREE.MeshPhongMaterial({color:0xFF0000});
var ball = new THREE.Mesh(geometry, material);
ball.position.set(0,0,50);
ball.castShadow = true;
scene.add(ball);


var camera = new THREE.PerspectiveCamera(90,width/height,0.1,1000);
camera.position.set(0, -10, 90);
//camera.lookAt(ball);
camera.rotation.x =  Math.PI * 90 / 180;

var ambientLight = new THREE.AmbientLight(0xffffff,0.1);
scene.add(ambientLight);

var spotLight = new THREE.SpotLight(0xFFffff,10);
spotLight.position.set(0,0,100);
spotLight.penumbra = 1;
spotLight.angle = 0.55;
spotLight.castShadow = true;
spotLight.intensity = 1;

var spotLightHelper = new THREE.SpotLightHelper( spotLight );
spotLight.shadowCameraFar = 600;
scene.add(spotLightHelper);
scene.add(spotLight);


//controls
controls = new THREE.TrackballControls( camera );
                                controls.rotateSpeed = 2.0;
                                controls.zoomSpeed = 1.2;
                                controls.panSpeed = 0.8;
                                controls.noZoom = true;
                                controls.noPan = true;
                                controls.staticMoving = true;
                                controls.dynamicDampingFactor = 0.3;
window.addEventListener( 'resize', onResize, false );

function onResize() {
  renderer.setSize( window.innerWidth, window.innerHeight );
  camera.aspect = ( window.innerWidth / window.innerHeight );
  camera.updateProjectionMatrix();
}

//controls handler
 function onDocumentMouseDown( event ) {
                                event.preventDefault();
                                
                                        controls.enabled = true;
                                        
}


//Making a render loop for scenes
//draw: renderer.render(scene,camera);
function render(){
        renderer.render(scene,camera);

        requestAnimationFrame(render);
var clock = new THREE.Clock();
        var delta = clock.getDelta();
controls.update(delta);
}
    
    
    
    
render();
</script>
</body>

</html>



